<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NghiLaTeX - AI-Powered LaTeX Workspace</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main Container -->
    <div class="app-container">
        <!-- Left Sidebar -->
        <aside class="left-sidebar">
            <!-- Top Icons -->
            <div class="sidebar-icons">
                <button class="icon-btn" title="Settings">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"/>
                    </svg>
                </button>
                <button class="icon-btn" title="View Mode">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 4h14v2H3V4zm0 5h14v2H3V9zm0 5h14v2H3v-2z"/>
                    </svg>
                </button>
                <button class="icon-btn" title="Split View">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2 3h7v14H2V3zm9 0h7v14h-7V3z"/>
                    </svg>
                </button>
            </div>

            <!-- File Section -->
            <div class="sidebar-section">
                <div class="section-header">
                    <button class="new-file-btn">
                        <span>New P...</span>
                        <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                            <path d="M6 2v8M2 6h8" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <button class="share-btn">Share</button>
                </div>
                
                <div class="tabs">
                    <button class="tab active">Files</button>
                    <button class="tab">Chats</button>
                    <button class="icon-btn-small">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M7 7V3h2v4h4v2h-4v4H7V9H3V7h4z"/>
                        </svg>
                    </button>
                    <button class="icon-btn-small">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <circle cx="8" cy="8" r="6" stroke="currentColor" fill="none"/>
                            <path d="M8 5v3l2 2"/>
                        </svg>
                    </button>
                </div>

                <!-- File Tree -->
                <div class="file-list" id="fileTreeContent">
                    <!-- Files will be rendered here by JavaScript -->
                </div>
            </div>

            <!-- Outline Section -->
            <div class="sidebar-section outline-section">
                <div class="section-title">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                        <path d="M2 2h8M2 6h8M2 10h8" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    <span>Outline</span>
                </div>
                <div class="outline-content" id="outlineContent">
                    <div class="outline-item">Problem Statem...</div>
                    <div class="outline-item indent-1">Research Bac...</div>
                    <div class="outline-item indent-2">The Evolut...</div>
                    <div class="outline-item indent-2">The Challe...</div>
                    <div class="outline-item indent-2">The Rise o...</div>
                    <div class="outline-item indent-1">This Gap: T...</div>
                </div>
            </div>

            <!-- Connected Status -->
            <div class="connected-status">
                <div class="status-indicator">JR</div>
                <span>Connected</span>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="top-bar-left">
                    <button class="icon-btn">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor">
                            <path d="M3 9h12M9 3v12" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <div class="file-tab">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="#6366f1">
                            <rect x="2" y="2" width="10" height="10" rx="1"/>
                        </svg>
                        <span id="currentFileName">main.tex</span>
                    </div>
                </div>
                <div class="top-bar-right">
                    <button class="tools-btn">
                        <span>Tools</span>
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                            <path d="M3 3h8v8H3z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Editor with Line Numbers -->
            <div class="editor-wrapper">
                <div class="line-numbers" id="lineNumbers"></div>
                <textarea class="code-editor" id="editor" spellcheck="false"></textarea>
            </div>

            <!-- Bottom Chat Bar -->
            <div class="chat-bar">
                <!-- Suggested Prompts (show when chat is focused) -->
                <div class="suggested-prompts" id="suggestedPrompts" style="display: none;">
                    <div class="prompt-chip" data-prompt="Improve the academic tone of my introduction">
                        ‚ú® Improve academic tone
                    </div>
                    <div class="prompt-chip" data-prompt="Restructure my document for better flow">
                        üìù Restructure document
                    </div>
                    <div class="prompt-chip" data-prompt="Fix LaTeX formatting errors">
                        üîß Fix formatting
                    </div>
                    <div class="prompt-chip" data-prompt="Generate an abstract for my paper">
                        üìÑ Generate abstract
                    </div>
                    <div class="prompt-chip" data-prompt="Check and format all citations">
                        üìö Format citations
                    </div>
                </div>
                
                <div class="chat-input-wrapper">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor" class="chat-icon">
                        <path d="M9 2a7 7 0 00-7 7c0 1.5.5 2.9 1.3 4L2 16l3-1.3A7 7 0 109 2z"/>
                    </svg>
                    <input type="text" class="chat-input" placeholder="Ask anything" id="chatInput">
                    <div class="chat-actions">
                        <button class="chat-action-btn" title="Attach">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor">
                                <path d="M8 2v10M4 8l4 4 4-4"/>
                            </svg>
                        </button>
                        <button class="chat-action-btn" title="Voice">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor">
                                <rect x="7" y="3" width="4" height="8" rx="2"/>
                                <path d="M5 9a4 4 0 008 0M9 13v2"/>
                            </svg>
                        </button>
                        <button class="chat-action-btn" id="sendChatBtn" title="Send">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor">
                                <path d="M2 9l14-7-7 14-2-7-5-0z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="floating-actions">
                    <button class="floating-btn" title="Refresh" id="refreshBtn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M4 10a6 6 0 1112 0"/>
                        </svg>
                    </button>
                    <button class="floating-btn" title="Undo" id="undoBtn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M8 5l-4 4 4 4M4 9h12"/>
                        </svg>
                    </button>
                    <button class="floating-btn" title="Next" id="nextBtn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M12 5l4 4-4 4M16 9H4"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Right Panel - PDF Preview -->
        <aside class="right-panel">
            <div class="preview-header">
                <button class="compile-btn">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 2v12M4 10l4 4 4-4"/>
                    </svg>
                    <span>Compile</span>
                </button>
                <div class="preview-controls">
                    <span class="page-info">01 <span class="page-total">of 10</span></span>
                    <button class="zoom-btn">
                        <span>Zoom to fit</span>
                        <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                            <path d="M3 6l3 3 3-3"/>
                        </svg>
                    </button>
                    <button class="icon-btn-small">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 3v10M3 8h10"/>
                        </svg>
                    </button>
                    <button class="icon-btn-small">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <circle cx="8" cy="8" r="1"/>
                            <circle cx="8" cy="4" r="1"/>
                            <circle cx="8" cy="12" r="1"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="preview-content" id="previewContent">
                <div class="pdf-page">
                    <img src="assets/previews/preview-v1.png" alt="PDF Preview" id="previewImage" class="preview-image">
                </div>
            </div>
        </aside>
    </div>

    <!-- Revision Badge (floating) -->
    <div class="revision-badge" id="revisionBadge" style="display: none;"></div>

    <!-- Scripts -->
    <script src="data/drafts.js"></script>
    <script src="data/ai_actions.js"></script>
    <script src="data/citations.js"></script>
    <script src="app.js"></script>
</body>
</html>
